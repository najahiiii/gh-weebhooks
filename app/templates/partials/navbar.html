{% set user = request.state.user if request.state.user is not none else none %}
{% set current_path = request.url.path %}
{% set hide_login = navbar_hide_login if navbar_hide_login is defined else False %}
<nav class="mx-auto mt-6 w-full max-w-5xl px-6">
  <div class="flex flex-col items-center justify-between gap-4 rounded-3xl border border-slate-800/60 bg-slate-900/80 px-6 py-4 text-sm text-slate-300 shadow-lg shadow-slate-950/30 backdrop-blur sm:flex-row">
    <div class="flex items-center gap-3">
      <img src="{{ request.url_for('static', path='images/favicon.svg') }}" alt="GitHub → Telegram Notifier logo" class="h-10 w-10" />
      <div>
        <p class="text-xs uppercase tracking-[0.3em] text-slate-500">gh-weebhooks</p>
        <p class="text-base font-semibold text-slate-100">GitHub → Telegram Notifier</p>
      </div>
    </div>
    <div class="flex flex-wrap items-center justify-center gap-2 text-xs font-medium uppercase tracking-wide">
      <a href="{{ request.url_for('root') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">Home</a>
      {% if user and user.is_admin %}
      <a href="{{ request.url_for('admin_dashboard') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">dashboard</a>
      <a href="{{ request.url_for('admin_destinations') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">destinations</a>
      <a href="{{ request.url_for('admin_subscriptions') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">subscriptions</a>
      <a href="{{ request.url_for('stats_page') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">stats</a>
      <a href="{{ request.url_for('new_bot_form') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">add bot</a>
      <a href="{{ request.url_for('setup_main_bot_form') }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">setup main bot</a>
      {% endif %}
      {% if user and user.is_admin %}
      <form method="post" action="{{ request.url_for('auth_logout') }}" class="flex items-center gap-2 rounded-full border border-emerald-500/40 bg-emerald-500/10 px-3 py-1.5 text-emerald-100 transition hover:border-emerald-400 hover:text-emerald-100">
        <span class="text-xs normal-case text-emerald-200">
          {{ user.username or user.telegram_user_id }}
        </span>
        <button type="submit" class="text-xs uppercase tracking-wide">Logout</button>
      </form>
      {% elif not hide_login %}
      <a href="{{ request.url_for('auth_login') }}?next={{ current_path | urlencode }}" class="rounded-full border border-slate-700/60 px-4 py-2 text-slate-200 transition hover:border-sky-400 hover:text-sky-200">admin login</a>
      {% endif %}
    </div>
  </div>
</nav>
